{% extends 'base.html.twig' %}

{% block title %}{{ course.title }} â€” ModuleQuizzer{% endblock %}

{% block content %}
<nav aria-label="breadcrumb">
  <ol class="breadcrumb">
    <li class="breadcrumb-item"><a href="/">Courses</a></li>
    <li class="breadcrumb-item active" aria-current="page">{{ course.title }}</li>
  </ol>
</nav>

<div class="d-flex justify-content-between align-items-start mb-3">
  <div>
    <h1>{{ course.title }}</h1>
    {% if course.description %}
      <p class="text-muted">{{ course.description }}</p>
    {% endif %}
  </div>
  <div class="btn-group">
    <a href="/course/{{ course.course_id }}/edit"
       class="btn btn-sm btn-outline-secondary">Edit</a>
    <form method="post" action="/course/{{ course.course_id }}/delete"
          class="d-inline"
          onsubmit="return confirm('Delete this course and all modules?');">
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
      <button type="submit" class="btn btn-sm btn-outline-danger">Delete</button>
    </form>
  </div>
</div>

<div class="d-flex justify-content-between align-items-center mb-3">
  <h2 class="h4 mb-0">Modules</h2>
  <a href="/course/{{ course.course_id }}/module/create"
     class="btn btn-sm btn-primary">+ Add Module</a>
</div>

{% if modules|length > 0 %}
  <div class="list-group mb-4">
    {% for module in modules %}
      <a href="/module/{{ module.module_id }}"
         class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
        <span>
          <span class="badge bg-secondary me-2">{{ module.sort_order }}</span>
          {{ module.title }}
        </span>
        <span class="text-muted small">{{ module.updated_at|date('M j, Y') }}</span>
      </a>
    {% endfor %}
  </div>
{% else %}
  <p class="text-muted">No modules yet. Add a module to begin building this course.</p>
{% endif %}
{% endblock %}
